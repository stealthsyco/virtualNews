<!doctype html>
<html lang="en">
    <head>
      <title>Testing</title>
      <meta charset="utf-8">
    </head>


    <body style="margin: 0;">

    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>

    <script src="js/three.min.js"></script>
    <script src="js/OrbitControls.js"></script>
    <script src="js/THREEx.KeyboardState.js"></script>
    <script src="js/BlendCharacter.js"></script>

    <script src="js/jquery-ui.js"></script>

    <!-- GUI script -->
    <script type='text/javascript' src='js/DAT.GUI.min.js'></script>

    <link rel=stylesheet href="css/jquery-ui.css" />
    <link rel=stylesheet href="css/info.css"/>
    <script src="js/info.js"></script>

    <div id="infoButton"></div>
    <div id="infoBox" title="Usage">

    Demo controls:
    <ul>
    <li> Q: play video
    <li> W: pause video
    <li> E: stop video
    <li> R: rewind to beginning
    </ul>
    </div>

      <script>
        // Set up the keyboard
        var keyboard = new THREEx.KeyboardState();

        // Set up the scene, camera, and renderer as global variables.

        var container, renderer;
        var camera, scene, projector;
        var walls;

        var backWallWidth = 2000;
        var sideWallWidth = 1200;

        init();
        animate();


        function init(){

          container = document.createElement('div');
          document.body.appendChild(container);
          
          camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 10000);
          camera.position.set(0, -backWallWidth/2 + 10, 10);
          camera.lookAt( new THREE.Vector3(10,10,10));

          scene = new THREE.Scene();
          projector = new THREE.Projector();

          var ambient = new THREE.AmbientLight(0x666666);
          scene.add(ambient);
          
          var directionalLight = new THREE.DirectionalLight(0xffffff);
          directionalLight.position.set( 0, 10, 10 ).normalize();
          directionalLight.castShadow = true;
          directionalLight.shadowMapWidth = 2048;
          directionalLight.shadowMapHeight = 2048;
          scene.add( directionalLight );


          //floor and walls

          walls = new THREE.Object3D();

          var groundGeo = new THREE.PlaneGeometry(backWallWidth, sideWallWidth);
          var sideWallGeo = new THREE.PlaneGeometry(sideWallWidth, backWallWidth);

          var floorTexture = new THREE.MeshBasicMaterial({
            map:THREE.ImageUtils.loadTexture('models/floor.jpg')
          });

          floorTexture.map.needsUpdate = true;

          var ground = new THREE.Mesh(groundGeo, floorTexture);
          ground.overdraw = true;
          ground.position.set(0, -backWallWidth, 0);
          ground.rotation.x = -Math.PI/2;
          walls.add(ground);

          scene.add(walls);

          renderer = new THREE.WebGLRenderer();
          renderer.setSize(window.innerWidth, window.innerHeight);
          renderer.shadowMapEnabled = true;
          container.appendChild( renderer.domElement );

        }

      function animate() {
        requestAnimationFrame( animate );
        render();
      }

      function render() {
        
        //camera.lookAt( scene.position );
        camera.lookAt(new THREE.Vector3(0,-backWallWidth/2 +10,10));
        //controls.update( clock.getDelta() );
        
        /*if ( video.readyState === video.HAVE_ENOUGH_DATA ) {
          imageContext.drawImage( video, 0, 0 );
          if ( screenTexture ) screenTexture.needsUpdate = true;
            
        }*/
        
        renderer.render( scene, camera );
      }

      </script>
    </body>
</html>